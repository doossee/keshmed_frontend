import{u as z}from"./useOrders.IqAoDDSj.js";import{d as D,u as I,r as m,c as b,o as N,a as O,b as t,e as l,V as h,f as y,g as o,j as R,k as L,l as k,t as i,m as q,n as u,P as A,z as _,Q as F,i as G,y as H,A as M,B as Q,G as E}from"./entry.cSm7itKk.js";import{l as J}from"./lodash.6ft7VFuc.js";const K={class:"responsive-datatable"},W=["data-label"],X=["data-label"],Y=["data-label"],Z=["data-label"],ee=["data-label"],ae=["data-label"],ne=D({__name:"orders",setup(te){const{checkOrder:C,getOrders:x}=z(),{debounce:S}=J,{t:$}=I(),p=m(""),n=m([]),c=m(1),r=m(25),f=m(0),v=m(!1),w=[{title:"products.first_name",key:"name",sortable:!1},{title:"admin.product",key:"product",sortable:!1},{title:"products.phone",key:"phone",sortable:!1},{title:"admin.order_message",key:"message",sortable:!1},{title:"admin.date",key:"date",sortable:!1},{title:"admin.status",key:"status",sortable:!1}],U=b(()=>{const e=new URLSearchParams;return c.value&&e.append("page",String(c.value)),r.value&&e.append("limit",String(r.value)),p.value.trim()&&e.append("search",p.value),e.toString()}),P=b(()=>w.map(e=>({...e,title:$(e.title)}))),T=b(()=>{const e=(c.value-1)*r.value;return`${e+1}-${e+n.value.length} / ${f.value}`}),B=S(e=>{p.value=e,c.value=1},500),j=async(e,s)=>{await C(e,{country:n.value[s].country,first_name:n.value[s].first_name,last_name:n.value[s].last_name,message:n.value[s].message,phone:n.value[s].phone,checked:!0,product:n.value[s].product.id})&&(n.value[s].checked=!0,alert("Successfully checked order"))},V=async()=>{v.value=!0;const e=await x(U.value);n.value=e.results,f.value=e.count,v.value=!1};return(e,s)=>(N(),O(E,{fluid:"",class:"py-0"},{default:t(()=>[l(Q,{justify:"space-between",align:"center"},{default:t(()=>[l(h,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:t(()=>[l(y,{"bg-color":"surface","onUpdate:modelValue":o(B),placeholder:e.$t("admin.search"),"append-inner-icon":"mdi-magnify","hide-details":"",flat:"",density:"compact",variant:"solo",class:"border rounded"},null,8,["onUpdate:modelValue","placeholder"])]),_:1}),l(h,{cols:"12"},{default:t(()=>[l(R,{flat:"",border:""},{default:t(()=>[l(L,{class:"px-4 pt-3 font-weight-light"},{default:t(()=>[k(i(e.$t("admin.orders")),1)]),_:1}),l(q,{class:"px-0"},{default:t(()=>[u("div",K,[l(A,{"items-per-page":o(r),"onUpdate:itemsPerPage":s[0]||(s[0]=a=>_(r)?r.value=a:null),search:o(p),"items-length":o(f),loading:o(v),"loading-text":e.$t("loading")+"...","no-data-text":e.$t("no_data"),hover:"",items:o(n),"item-value":"id","onUpdate:options":V,headers:o(P),density:"comfortable"},{bottom:t(()=>[]),"item.name":t(({item:a,column:d})=>[u("td",{"data-label":d.title},i(a.first_name)+" "+i(a.last_name),9,W)]),"item.message":t(({item:a,column:d})=>[u("td",{"data-label":d.title},i(a.message),9,X)]),"item.product":t(({item:a,column:d})=>{var g;return[u("td",{"data-label":d.title},i((g=a.product)==null?void 0:g[`title_${e.$i18n.locale}`]),9,Y)]}),"item.phone":t(({item:a,column:d})=>[u("td",{"data-label":d.title},i(a.phone),9,Z)]),"item.date":t(({item:a,column:d})=>[u("td",{"data-label":d.title},i(new Date(a.created_at).toLocaleString()),9,ee)]),"item.status":t(({item:a,column:d,index:g})=>[u("td",{"data-label":d.title},[l(F,{variant:"flat",disabled:a.checked,color:a.checked?"green":"red",onClick:le=>j(a.id,g)},{default:t(()=>[l(G,null,{default:t(()=>[k("mdi-check"+i(a.checked?"-all":""),1)]),_:2},1024)]),_:2},1032,["disabled","color","onClick"])],8,ae)]),_:1},8,["items-per-page","search","items-length","loading","loading-text","no-data-text","items","headers"])])]),_:1})]),_:1})]),_:1}),l(h,{cols:"12",sm:"5",class:"pt-0 pb-1 d-flex align-center"},{default:t(()=>[l(H,{"bg-color":"surface",modelValue:o(r),"onUpdate:modelValue":s[1]||(s[1]=a=>_(r)?r.value=a:null),transition:"fade-transition","hide-details":"",flat:"",density:"compact",variant:"solo",class:"border rounded",items:[10,25,50,100,150]},null,8,["modelValue"]),l(y,{"bg-color":"surface","hide-details":"",flat:"",density:"compact",variant:"solo",class:"border rounded ml-3","model-value":o(T),readonly:""},null,8,["model-value"])]),_:1}),l(h,{cols:"12",sm:"4",md:"4",class:"pt-0 pl-0 pb-1 pr-2 d-flex justify-end align-center"},{default:t(()=>[l(M,{"bg-color":"surface",modelValue:o(c),"onUpdate:modelValue":[s[2]||(s[2]=a=>_(c)?c.value=a:null),V],length:Math.ceil(o(f)/o(r)),"active-color":"primary",size:"40","total-visible":"3",variant:"flat"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}))}});export{ne as default};
//# sourceMappingURL=orders.trt18B3n.js.map

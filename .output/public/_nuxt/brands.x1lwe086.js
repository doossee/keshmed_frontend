import{u as le}from"./useBrands.hvrC5f7P.js";import{d as te,u as se,r as d,c as j,w as oe,o as ne,a as de,b as a,e,V as i,f as z,g as o,h as _,i as w,j as O,k as R,l as k,t as b,m as S,n as c,p as ie,q as I,s as B,v as re,x as ue,y as ce,z as C,A as me,B as U,C as pe,D as fe,E as ve,F as ge,G as be,H as _e}from"./entry.9xEQesvV.js";import{l as Ve}from"./lodash.6ft7VFuc.js";import{c as A}from"./index.vFXdcEz2.js";const he={class:"responsive-datatable"},ye=["data-label"],we=c("span",null,null,-1),ke=["data-label"],Ce=["data-label"],xe=["data-label"],$e={class:"font-weight-light"},Te=te({__name:"brands",setup(je){const{createBrand:N,deleteBrand:H,getAllBrands:q,updateBrand:E}=le(),{debounce:G}=Ve,{t:M}=se(),P=[l=>!!l||"asdf"],p=d(1),f=d(25),x=d(0),$=d(!1),r=d(null),T=d(""),v=d([]),V=d(null),h=d(-1),u=d(!1),y=d(!1),D=d(null),J=[{title:"admin.photo",key:"photo",sortable:!1},{title:"products.title",key:"name"},{title:"admin.actions",align:"end",key:"actions",sortable:!1}],g=d({name:""}),K=j(()=>{var l;return((l=r.value)==null?void 0:l.length)>0?URL.createObjectURL(r.value[0]):"/images/nophoto.jpg"}),Q=j(()=>{const l=(p.value-1)*f.value;return`${l+1}-${l+v.value.length} / ${x.value}`}),W=j(()=>J.map(l=>({...l,title:M(l.title)}))),X=G(l=>{T.value=l,p.value=1},500);oe(u,l=>l||F());const Y=(l,s)=>{h.value=s,V.value=l.id,g.value=Object.assign({},l),u.value=!0},Z=async(l,s)=>{confirm("Do you delete this item?")&&(await H(l),v.value.splice(s,1))},F=()=>{u.value=!1,_e(()=>{g.value=Object.assign({},{name:"",country:null,description_uz:"",description_ru:"",description_en:""}),r.value=null,V.value=null,h.value=-1})},ee=async()=>{var t;y.value=!0;const{valid:l}=await((t=D.value)==null?void 0:t.validate());if(l){var s=new FormData;Object.keys(g.value).map(n=>{s.append(n,g.value[n])}),r.value&&s.append("image",r.value[0]);try{if(h.value>-1){const n=await E(V.value,s);Object.assign(v.value[h.value],n)}else{const n=await N(s);v.value.push(n)}F()}catch(n){console.log(n)}finally{y.value=!1}}},L=async()=>{$.value=!0;const l=await q("");v.value=l.results,x.value=l.results.length,$.value=!1};return L(),(l,s)=>(ne(),de(be,{fluid:"",class:"py-0"},{default:a(()=>[e(U,{justify:"space-between",align:"center"},{default:a(()=>[e(i,{cols:"9",sm:"6",md:"4",class:"pb-0 pr-0"},{default:a(()=>[e(z,{"bg-color":"surface","onUpdate:modelValue":o(X),placeholder:l.$t("admin.search"),"append-inner-icon":"mdi-magnify","hide-details":"",flat:"",density:"compact",variant:"solo",class:"border rounded"},null,8,["onUpdate:modelValue","placeholder"])]),_:1}),e(i,{cols:"3",sm:"4",md:"2",class:"pb-0 d-flex justify-end"},{default:a(()=>[e(_,{onClick:s[0]||(s[0]=t=>u.value=!0),color:"primary",size:"40",width:"100%"},{default:a(()=>[e(w,{icon:"mdi-plus"})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(O,{flat:"",border:""},{default:a(()=>[e(R,{class:"px-4 pt-3 font-weight-light"},{default:a(()=>[k(b(l.$t("products.brands")),1)]),_:1}),e(S,{class:"px-0"},{default:a(()=>[c("div",he,[e(ie,{page:o(p),"item-value":"id",search:o(T),loading:o($),hover:"",items:o(v),"items-per-page":o(f),"no-data-text":l.$t("no_data"),"loading-text":l.$t("loading")+"...",headers:o(W),density:"comfortable"},{bottom:a(()=>[]),"item.actions":a(({item:t,index:n,column:m})=>[c("td",{"data-label":m.title,class:"d-flex justify-space-between align-center"},[we,c("div",null,[e(_,{onClick:ae=>Y(t,n),color:"light-blue-accent-4",size:"30",flat:"",class:"mr-1"},{default:a(()=>[e(w,{icon:"mdi-pencil"})]),_:2},1032,["onClick"]),e(_,{onClick:ae=>Z(t.id,n),color:"red",size:"30",flat:""},{default:a(()=>[e(w,{icon:"mdi-delete"})]),_:2},1032,["onClick"])])],8,ye)]),"item.photo":a(({item:t,column:n})=>[c("td",{"data-label":n.title},[e(I,{size:"40",rounded:""},{default:a(()=>[e(B,{src:t.thumbnail||"/images/nophoto.jpg",cover:""},null,8,["src"])]),_:2},1024)],8,ke)]),"item.name":a(({item:t,column:n})=>[c("td",{"data-label":n.title},b(t.name),9,Ce)]),"item.country":a(({item:t,column:n})=>[c("td",{"data-label":n.title},[e(re,{nav:"",density:"compact"},{prepend:a(()=>[e(I,{size:"30"},{default:a(()=>{var m;return[e(B,{cover:"",src:(m=o(A)[t.country])==null?void 0:m.flag},null,8,["src"])]}),_:2},1024)]),default:a(()=>[e(ue,null,{default:a(()=>{var m;return[k(b((m=o(A)[t.country])==null?void 0:m.name),1)]}),_:2},1024)]),_:2},1024)],8,xe)]),_:1},8,["page","search","loading","items","items-per-page","no-data-text","loading-text","headers"])])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12",sm:"4",class:"pt-0 pb-1 d-flex align-center"},{default:a(()=>[e(ce,{"bg-color":"surface",modelValue:o(f),"onUpdate:modelValue":s[1]||(s[1]=t=>C(f)?f.value=t:null),transition:"fade-transition","hide-details":"",flat:"",density:"compact",variant:"solo",class:"border rounded",items:[10,25,50,100,150]},null,8,["modelValue"]),e(z,{"bg-color":"surface",variant:"solo",class:"border rounded ml-3","hide-details":"",flat:"",density:"compact","model-value":o(Q),readonly:""},null,8,["model-value"])]),_:1}),e(i,{cols:"12",sm:"4",md:"4",class:"pt-0 pl-0 pb-1 pr-2 d-flex justify-end align-center"},{default:a(()=>[e(me,{"bg-color":"surface",modelValue:o(p),"onUpdate:modelValue":[s[2]||(s[2]=t=>C(p)?p.value=t:null),L],length:Math.floor(o(x)/o(f)),"active-color":"primary",size:"40","total-visible":"3",variant:"flat"},null,8,["modelValue","length"])]),_:1})]),_:1}),e(ge,{persistent:"",modelValue:o(u),"onUpdate:modelValue":s[6]||(s[6]=t=>C(u)?u.value=t:null),"max-width":"500px",transition:"fade-transition"},{default:a(()=>[e(O,{flat:"",border:"",color:"background"},{default:a(()=>[e(R,{class:"px-4 py-3 d-flex justify-space-between align-center"},{default:a(()=>[c("span",$e,b(l.$t(o(V)?"admin.edit_brands":"admin.add_brands")),1),e(_,{flat:"",onClick:s[3]||(s[3]=t=>u.value=!1),size:"32",color:"primary"},{default:a(()=>[e(w,{size:"small",icon:"mdi-close"})]),_:1})]),_:1}),e(S,{class:"px-4 pt-2 pb-3"},{default:a(()=>[e(pe,{class:"w-100 form-card",ref_key:"form",ref:D},{default:a(()=>[e(U,{class:"pa-2"},{default:a(()=>[e(i,{cols:"12",class:"pa-2"},{default:a(()=>[e(fe,null,{default:a(()=>[k(b(l.$t("products.title")),1)]),_:1}),e(z,{modelValue:o(g).name,"onUpdate:modelValue":s[4]||(s[4]=t=>o(g).name=t),rules:P,placeholder:l.$t("products.title"),"hide-details":"",density:"compact","bg-color":"surface",color:"primary",variant:"solo",flat:"",class:"border rounded"},null,8,["modelValue","placeholder"])]),_:1}),e(i,{cols:"12",class:"pa-2"},{default:a(()=>[e(U,null,{default:a(()=>[e(i,{cols:"4",sm:"2",class:"pr-0"},{default:a(()=>[e(I,{rounded:"",size:"40"},{default:a(()=>[e(B,{cover:"",src:o(K)},null,8,["src"])]),_:1})]),_:1}),e(i,{cols:"8",sm:"10",class:"pl-0"},{default:a(()=>[e(ve,{flat:"",class:"border rounded",density:"compact","bg-color":"surface",modelValue:o(r),"onUpdate:modelValue":s[5]||(s[5]=t=>C(r)?r.value=t:null),max:"10",label:l.$t("admin.photo"),"hide-details":"",variant:"solo",color:"primary","prepend-icon":""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12",class:"pa-2"},{default:a(()=>[e(_,{disabled:o(y),loading:o(y),color:"primary",block:"",onClick:ee,height:"45"},{default:a(()=>[k(b(l.$t("admin.save")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Te as default};
//# sourceMappingURL=brands.x1lwe086.js.map

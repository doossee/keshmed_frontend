{"version":3,"file":"login.cqg1KWNq.js","sources":["../../../../pages/login.vue"],"sourcesContent":["<template>\r\n    <v-app>\r\n        <v-main>\r\n            <v-container class=\"h-screen\">\r\n                <v-row justify=\"center\" align=\"center\" class=\"h-100\">\r\n                    <v-card border flat max-width=\"400\" width=\"100%\">\r\n                        <div class=\"d-flex justify-center align-center py-4\">\r\n                            <img src=\"/keshmed-logo.png\" width=\"130\" height=\"60\" alt=\"\">\r\n                            <!-- <v-avatar size=\"150\" rounded>\r\n                                <v-img  cover></v-img>\r\n                            </v-avatar> -->\r\n                        </div>\r\n                        <v-card-title class=\"text-primary text-center mb-4\">Войти в панель администратора</v-card-title>\r\n                        <v-card-text class=\"text-red text-center py-0\" v-if=\"err\">Неправильный логин или пароль</v-card-text>\r\n                        <v-card-text>\r\n                            <v-form ref=\"form\">\r\n                                <v-row class=\"pa-2\">\r\n                                    <v-col cols=\"12\" class=\"pa-2\">\r\n                                        <v-text-field v-model=\"user_login.username\" :rules=\"nameRule\"\r\n                                            placeholder=\"Логин\" hide-details density=\"compact\" bg-color=\"surface\"\r\n                                            color=\"primary\" variant=\"solo\" flat class=\"border rounded\"\r\n                                        ></v-text-field>\r\n                                    </v-col>\r\n                                    <v-col cols=\"12\" class=\"pa-2\">\r\n                                        <v-text-field v-model=\"user_login.password\" :rules=\"nameRule\"\r\n                                            :append-inner-icon=\"show?'mdi-eye':'mdi-eye-off'\"\r\n                                            @click:append-inner=\"show=!show\" :type=\"show?'text':'password'\"\r\n                                            placeholder=\"Пароль\" hide-details density=\"compact\" bg-color=\"surface\"\r\n                                            color=\"primary\" variant=\"solo\" flat class=\"border rounded\"\r\n                                        ></v-text-field>\r\n                                    </v-col>\r\n                                    <v-col cols=\"12\" class=\"pa-2\">\r\n                                        <v-btn :disabled=\"loading\" @click=\"handleLogin\" block color=\"primary\" flat>Войти в систему</v-btn>\r\n                                    </v-col>\r\n                                </v-row>\r\n                            </v-form>\r\n                        </v-card-text>\r\n                    </v-card>\r\n                </v-row>\r\n            </v-container>\r\n        </v-main>\r\n    </v-app>\r\n</template>\r\n    \r\n<script setup lang=\"ts\">\r\nconst { login } = useAuth()\r\nconst nameRule = [(v: any) => !!v || 'asdf']\r\n\r\nconst show = ref(false)\r\nconst err = ref(false)\r\nconst loading = ref(false)\r\nconst form = ref<any>(false)\r\nconst user_login = reactive({\r\n    username: \"\",\r\n    password: \"\"\r\n})\r\n\r\nconst handleLogin = async () => {\r\n    err.value = false\r\n    loading.value = true\r\n    const { valid } = await form.value?.validate();\r\n    if (!valid) return\r\n    try {\r\n        await login(user_login)\r\n        Object.assign(user_login, {\r\n            username: '',\r\n            password: ''\r\n        })\r\n    } catch (error) {\r\n        err.value = true\r\n    } finally {\r\n        loading.value = false\r\n    }\r\n}\r\n</script>"],"names":["login","useAuth","nameRule","v","show","ref","err","loading","form","user_login","reactive","handleLogin","valid","_a"],"mappings":"qYA6CM,KAAA,CAAE,MAAAA,GAAUC,IACZC,EAAW,CAAEC,GAAW,CAAC,CAACA,GAAK,MAAM,EAErCC,EAAOC,EAAI,EAAK,EAChBC,EAAMD,EAAI,EAAK,EACfE,EAAUF,EAAI,EAAK,EACnBG,EAAOH,EAAS,EAAK,EACrBI,EAAaC,EAAS,CACxB,SAAU,GACV,SAAU,EAAA,CACb,EAEKC,EAAc,SAAY,OAC5BL,EAAI,MAAQ,GACZC,EAAQ,MAAQ,GAChB,KAAM,CAAE,MAAAK,CAAM,EAAI,OAAMC,EAAAL,EAAK,QAAL,YAAAK,EAAY,YACpC,GAAKD,EACD,GAAA,CACA,MAAMZ,EAAMS,CAAU,EACtB,OAAO,OAAOA,EAAY,CACtB,SAAU,GACV,SAAU,EAAA,CACb,OACW,CACZH,EAAI,MAAQ,EAAA,QACd,CACEC,EAAQ,MAAQ,EACpB,CAAA"}
import{d as R,u as L,r as m,c as b,o as q,a as A,b as t,V as F,e as l,f as v,g as k,h as o,k as H,l as M,m as _,t as i,n as Q,p as c,P as E,A as V,Q as C,j as $,z as G,B as J,C as K}from"./DYO0wL_f.js";import{u as W}from"./BtilBq3A.js";import{l as X}from"./CrhyZOWk.js";const Y={class:"responsive-datatable"},Z=["data-label"],ee=["data-label"],ae=["data-label"],te=["data-label"],le=["data-label"],se=["data-label"],oe={class:"d-flex ga-1"},ce=R({__name:"orders",setup(de){const{checkOrder:x,getOrders:S,deleteOrder:w}=W(),{debounce:U}=X,{t:P}=L(),f=m(""),d=m([]),u=m(1),r=m(25),h=m(0),g=m(!1),T=[{title:"products.first_name",key:"name",sortable:!1},{title:"admin.product",key:"product",sortable:!1},{title:"products.phone",key:"phone",sortable:!1},{title:"admin.order_message",key:"message",sortable:!1},{title:"admin.date",key:"date",sortable:!1},{title:"admin.status",key:"status",sortable:!1}],B=b(()=>{const e=new URLSearchParams;return u.value&&e.append("page",String(u.value)),r.value&&e.append("limit",String(r.value)),f.value.trim()&&e.append("search",f.value),e.toString()}),D=b(()=>T.map(e=>({...e,title:P(e.title)}))),O=b(()=>{const e=(u.value-1)*r.value;return`${e+1}-${e+d.value.length} / ${h.value}`}),j=U(e=>{f.value=e,u.value=1},500),z=async(e,s)=>{await x(e,{country:d.value[s].country,first_name:d.value[s].first_name,last_name:d.value[s].last_name,message:d.value[s].message,phone:d.value[s].phone,checked:!0,product:d.value[s].product.id})&&(d.value[s].checked=!0,alert("Successfully checked order"))},I=async(e,s)=>{confirm("")&&(d.value.splice(s,1),await w(e))},y=async()=>{g.value=!0;const e=await S(B.value);d.value=e.results,h.value=e.count,g.value=!1};return(e,s)=>(q(),A(F,{fluid:"",class:"py-0"},{default:t(()=>[l(K,{justify:"space-between",align:"center"},{default:t(()=>[l(v,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:t(()=>[l(k,{"bg-color":"surface","onUpdate:modelValue":o(j),placeholder:e.$t("admin.search"),"append-inner-icon":"mdi-magnify","hide-details":"",flat:"",density:"compact",variant:"solo",class:"border rounded"},null,8,["onUpdate:modelValue","placeholder"])]),_:1}),l(v,{cols:"12"},{default:t(()=>[l(H,{flat:"",border:""},{default:t(()=>[l(M,{class:"px-4 pt-3 font-weight-light"},{default:t(()=>[_(i(e.$t("admin.orders")),1)]),_:1}),l(Q,{class:"px-0"},{default:t(()=>[c("div",Y,[l(E,{"items-per-page":o(r),"onUpdate:itemsPerPage":s[0]||(s[0]=a=>V(r)?r.value=a:null),search:o(f),"items-length":o(h),loading:o(g),"loading-text":e.$t("loading")+"...","no-data-text":e.$t("no_data"),hover:"",items:o(d),"item-value":"id","onUpdate:options":y,headers:o(D),density:"comfortable"},{bottom:t(()=>[]),"item.name":t(({item:a,column:n})=>[c("td",{"data-label":n.title},i(a.first_name)+" "+i(a.last_name),9,Z)]),"item.message":t(({item:a,column:n})=>[c("td",{"data-label":n.title},i(a.message),9,ee)]),"item.product":t(({item:a,column:n})=>{var p;return[c("td",{"data-label":n.title},i((p=a.product)==null?void 0:p[`title_${e.$i18n.locale}`]),9,ae)]}),"item.phone":t(({item:a,column:n})=>[c("td",{"data-label":n.title},i(a.phone),9,te)]),"item.date":t(({item:a,column:n})=>[c("td",{"data-label":n.title},i(new Date(a.created_at).toLocaleString()),9,le)]),"item.status":t(({item:a,column:n,index:p})=>[c("td",{"data-label":n.title},[c("div",oe,[l(C,{variant:"flat",disabled:a.checked,color:a.checked?"green":"red",onClick:N=>z(a.id,p)},{default:t(()=>[l($,null,{default:t(()=>[_("mdi-check"+i(a.checked?"-all":""),1)]),_:2},1024)]),_:2},1032,["disabled","color","onClick"]),l(C,{variant:"flat",color:"red",onClick:N=>I(a.id,p)},{default:t(()=>[l($,null,{default:t(()=>[_("mdi-delete")]),_:1})]),_:2},1032,["onClick"])])],8,se)]),_:1},8,["items-per-page","search","items-length","loading","loading-text","no-data-text","items","headers"])])]),_:1})]),_:1})]),_:1}),l(v,{cols:"12",sm:"5",class:"pt-0 pb-1 d-flex align-center"},{default:t(()=>[l(G,{"bg-color":"surface",modelValue:o(r),"onUpdate:modelValue":s[1]||(s[1]=a=>V(r)?r.value=a:null),transition:"fade-transition","hide-details":"",flat:"",density:"compact",variant:"solo",class:"border rounded",items:[10,25,50,100,150]},null,8,["modelValue"]),l(k,{"bg-color":"surface","hide-details":"",flat:"",density:"compact",variant:"solo",class:"border rounded ml-3","model-value":o(O),readonly:""},null,8,["model-value"])]),_:1}),l(v,{cols:"12",sm:"4",md:"4",class:"pt-0 pl-0 pb-1 pr-2 d-flex justify-end align-center"},{default:t(()=>[l(J,{"bg-color":"surface",modelValue:o(u),"onUpdate:modelValue":[s[2]||(s[2]=a=>V(u)?u.value=a:null),y],length:Math.ceil(o(h)/o(r)),"active-color":"primary",size:"40","total-visible":"3",variant:"flat"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}))}});export{ce as default};
//# sourceMappingURL=iVdSimbI.js.map

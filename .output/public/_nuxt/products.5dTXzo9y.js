import{d as R,o as d,a as m,b as e,q as E,s as G,e as t,x as A,t as o,l as _,a5 as H,v as F,r as V,aj as J,ak as K,ac as Q,Z,V as x,j as W,m as p,n as g,f as B,g as r,B as N,a2 as L,al as X,am as Y,i as ee,O as T,J as P,K as U,N as z,A as te,G as ae}from"./entry.wmKHaZS0.js";import{u as se}from"./vue.f36acd1f.WHSpSiKh.js";import{u as le}from"./useProducts.p1LffWDY.js";import{u as re}from"./useCategories.irO-WxiL.js";import{u as oe}from"./useBrands.hvrC5f7P.js";import{l as ne}from"./lodash.6ft7VFuc.js";const de=R({__name:"AppProductList",props:{product:{type:Object}},setup(i){return(h,q)=>(d(),m(F,{theme:"light",variant:"flat",color:"surface",link:"",to:`/product/${i.product.slug}`,border:"",lines:"three",rounded:"",class:"mb-3 pa-2 pt-0"},{prepend:e(()=>[t(E,{size:"120",rounded:"",color:"grey-lighten-3"},{default:e(()=>{var v,$,k,b;return[t(G,{alt:((v=i.product)==null?void 0:v.title_uz)+" image",src:((b=(k=($=i.product)==null?void 0:$.images)==null?void 0:k[0])==null?void 0:b.image)||"/img/nophoto.jpg"},null,8,["alt","src"])]}),_:1})]),default:e(()=>[t(A,{class:"text-primary text-body-2"},{default:e(()=>[_(o(i.product.brand.name),1)]),_:1}),t(A,null,{default:e(()=>[_(o(i.product[`title_${h.$i18n.locale}`]),1)]),_:1}),t(H,{class:"text-caption"},{default:e(()=>[_(o(i.product[`description_${h.$i18n.locale}`]),1)]),_:1}),t(A,{class:"text-body-1"},{default:e(()=>[_(o(i.product.price)+" $",1)]),_:1})]),_:1},8,["to"]))}}),ie={class:"text-primary"},ce={class:"text-primary"},ue=["onClick"],pe={class:"text-primary"},me={class:"text-center text-grey font-weight-light"},ye={key:0,class:"text-center text-grey font-weight-light"},xe=R({__name:"products",async setup(i){let h,q;se({title:"Искать Медицинское Оборудование в Узбекистане",meta:[{name:"description",content:"Найдите широкий ассортимент медицинского оборудования в Узбекистане. Качественные товары, высокий уровень сервиса. Покупайте оборудование для здравоохранения у надежных поставщиков."},{name:"keywords",content:"медицинское оборудование, Узбекистан, оборудование для здравоохранения, медицинские товары, медтехника, поставщики, купить оборудование"}]});const{getAllProducts:v}=le(),{getTree:$}=re(),{getAllBrands:k}=oe(),b=V([]),j=V([]),M=V(0),c=J(),C=V(!0),w=V([]),O=K(),n=Q({search:c.query.search||"",brand:c.query.brand||"",category:c.query.category||"",min_price:c.query.min_price||0,max_price:c.query.max_price||0,page:c.query.page||1,for_sale:!0}),y=(l,s)=>{if(c.query[l]==s)return;const f={...c.query};s===0||s===""?delete f[l]:f[l]=s,n[l]=s,O.replace({path:"/products",query:f}),I()},I=ne.debounce(async()=>{C.value=!0,w.value=[];const l=await v(location!=null&&location.search?(location==null?void 0:location.search)+"&expand=images":"?expand=images");w.value=l.results,C.value=!1},500),S=async()=>{const[l,s,f]=await Promise.all([$(),k(""),I()]);b.value=l,j.value=s.results};return[h,q]=Z(()=>S()),await h,q(),(l,s)=>{const f=de;return d(),m(ae,null,{default:e(()=>[t(N,null,{default:e(()=>[t(x,{cols:"12",sm:"4",class:"pr-0"},{default:e(()=>[t(W,{flat:"",border:""},{default:e(()=>[t(p,{class:"w-100 text-primary d-flex justify-space-between align-center"},{default:e(()=>[g("span",null,o(l.$t("products.search_by_name")),1)]),_:1}),t(p,{class:"py-0 pb-1"},{default:e(()=>[t(B,{placeholder:l.$t("products.search_by_name"),"append-inner-icon":"mdi-magnify",flat:"",density:"compact",class:"border rounded","hide-details":"",variant:"solo","bg-color":"background",color:"primary",modelValue:r(n).search,"onUpdate:modelValue":[s[0]||(s[0]=a=>r(n).search=a),s[1]||(s[1]=a=>y("search",a))]},null,8,["placeholder","modelValue"])]),_:1}),t(p,{class:"pb-0 pt-2"},{default:e(()=>[g("span",ie,o(l.$t("products.search_by_price")),1)]),_:1}),t(p,{class:"pb-0 pt-2 px-3"},{default:e(()=>[t(N,{class:"pa-2"},{default:e(()=>[t(x,{class:"pa-2",cols:"6"},{default:e(()=>[t(B,{min:"0",modelValue:r(n).min_price,"onUpdate:modelValue":[s[2]||(s[2]=a=>r(n).min_price=a),s[3]||(s[3]=a=>y("min_price",+a))],"bg-color":"background",class:"border rounded",type:"number",variant:"solo",flat:"","hide-details":"",density:"compact",placeholder:l.$t("products.min")},null,8,["modelValue","placeholder"])]),_:1}),t(x,{class:"pa-2",cols:"6"},{default:e(()=>[t(B,{min:"0",modelValue:r(n).max_price,"onUpdate:modelValue":[s[4]||(s[4]=a=>r(n).max_price=a),s[5]||(s[5]=a=>y("max_price",+a))],"bg-color":"background",class:"border rounded",type:"number",variant:"solo",flat:"","hide-details":"",density:"compact",placeholder:l.$t("products.max")},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),t(p,{class:"pb-0"},{default:e(()=>[g("span",ce,o(l.$t("products.categories")),1)]),_:1}),t(p,{class:"py-0"},{default:e(()=>[t(L,{items:r(b),"item-children":"children","item-title":`name_${l.$i18n.locale}`,density:"compact",nav:"",class:"px-0","open-strategy":"single","item-value":"id",mandatory:"",modelValue:r(n).category,"onUpdate:modelValue":s[6]||(s[6]=a=>r(n).category=a),"active-class":"text-primary"},{title:e(({title:a,item:u})=>[g("span",{class:X(["font-weight-light text-hover-link",{"text-primary":r(n).category===u.id}]),onClick:Y(D=>y("category",u.id),["stop"])},o(a),11,ue)]),append:e(({item:a,isActive:u})=>[a.children.length?(d(),m(ee,{key:0},{default:e(()=>[_("mdi-"+o(u?"minus":"plus"),1)]),_:2},1024)):T("",!0)]),_:1},8,["items","item-title","modelValue"])]),_:1}),t(p,{class:"py-0"},{default:e(()=>[g("span",pe,o(l.$t("products.brands")),1)]),_:1}),t(p,{class:"py-0"},{default:e(()=>[t(L,{density:"compact",nav:"",class:"px-0",mandatory:"",color:"primary"},{default:e(()=>[(d(!0),P(z,null,U(r(j),(a,u)=>(d(),m(F,{class:"py-0",key:u,active:r(n).brand===a.id,height:"25",value:a.id,link:"",onClick:D=>y("brand",a.id)},{default:e(()=>[_(o(a.name),1)]),_:2},1032,["active","value","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),r(C)?(d(),m(x,{key:0,cols:"12",sm:"8"},{default:e(()=>[g("p",me,o(l.$t("loading"))+"...",1)]),_:1})):(d(),m(x,{key:1,cols:"12",sm:"8"},{default:e(()=>[t(L,{class:"py-0 px-0","bg-color":"background"},{default:e(()=>[!r(C)&&r(w).length===0?(d(),P("p",ye,o(l.$t("no_data")),1)):T("",!0),(d(!0),P(z,null,U(r(w),(a,u)=>(d(),m(f,{key:u,product:a},null,8,["product"]))),128))]),_:1}),t(te,{density:"comfortable",length:Math.ceil(r(M)/25),"model-value":+r(n).page,"onUpdate:modelValue":s[7]||(s[7]=a=>y("page",a)),variant:"flat","active-color":"primary"},null,8,["length","model-value"])]),_:1}))]),_:1})]),_:1})}}});export{xe as default};
//# sourceMappingURL=products.5dTXzo9y.js.map
